# db/seeds/02_regions_and_cities.rb
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –≥–æ—Ä–æ–¥–æ–≤ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ ID

puts '=== –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –≥–æ—Ä–æ–¥–æ–≤ ==='

# –î–∞–Ω–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –≥–æ—Ä–æ–¥–æ–≤
regions_data = [
  { 
    name: '–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–ö–∏—ó–≤', '–ë—Ä–æ–≤–∞—Ä–∏', '–ë–æ—Ä–∏—Å–ø—ñ–ª—å', '–Ü—Ä–ø—ñ–Ω—å', '–ë—É—á–∞', '–ë—ñ–ª–∞ –¶–µ—Ä–∫–≤–∞', '–§–∞—Å—Ç—ñ–≤']
  },
  { 
    name: '–õ—å–≤—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–õ—å–≤—ñ–≤', '–î—Ä–æ–≥–æ–±–∏—á', '–°—Ç—Ä–∏–π', '–¢—Ä—É—Å–∫–∞–≤–µ—Ü—å', '–ß–µ—Ä–≤–æ–Ω–æ–≥—Ä–∞–¥', '–°–∞–º–±—ñ—Ä', '–ë–æ—Ä–∏—Å–ª–∞–≤']
  },
  { 
    name: '–û–¥–µ—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–û–¥–µ—Å–∞', '–ß–æ—Ä–Ω–æ–º–æ—Ä—Å—å–∫', '–Ü–∑–º–∞—ó–ª', '–ë—ñ–ª–≥–æ—Ä–æ–¥-–î–Ω—ñ—Å—Ç—Ä–æ–≤—Å—å–∫–∏–π', '–Æ–∂–Ω–µ', '–ü–æ–¥—ñ–ª—å—Å—å–∫']
  },
  { 
    name: '–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–•–∞—Ä–∫—ñ–≤', '–Ü–∑—é–º', '–õ–æ–∑–æ–≤–∞', '–ß—É–≥—É—ó–≤', '–ü–µ—Ä–≤–æ–º–∞–π—Å—å–∫–∏–π', '–ö—É–ø\'—è–Ω—Å—å–∫']
  },
  { 
    name: '–î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–î–Ω—ñ–ø—Ä–æ', '–ö—Ä–∏–≤–∏–π –†—ñ–≥', '–ö–∞–º\'—è–Ω—Å—å–∫–µ', '–ù—ñ–∫–æ–ø–æ–ª—å', '–ü–∞–≤–ª–æ–≥—Ä–∞–¥', '–ù–æ–≤–æ–º–æ—Å–∫–æ–≤—Å—å–∫']
  },
  { 
    name: '–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–ó–∞–ø–æ—Ä—ñ–∂–∂—è', '–ú–µ–ª—ñ—Ç–æ–ø–æ–ª—å', '–ë–µ—Ä–¥—è–Ω—Å—å–∫', '–ï–Ω–µ—Ä–≥–æ–¥–∞—Ä', '–¢–æ–∫–º–∞–∫', '–í–∞—Å–∏–ª—ñ–≤–∫–∞']
  },
  { 
    name: '–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–í—ñ–Ω–Ω–∏—Ü—è', '–ñ–º–µ—Ä–∏–Ω–∫–∞', '–ú–æ–≥–∏–ª—ñ–≤-–ü–æ–¥—ñ–ª—å—Å—å–∫–∏–π', '–•–º—ñ–ª—å–Ω–∏–∫', '–ö–æ–∑—è—Ç–∏–Ω', '–ö–∞–ª–∏–Ω—ñ–≤–∫–∞']
  },
  { 
    name: '–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫', '–ö–æ–ª–æ–º–∏—è', '–ö–∞–ª—É—à', '–î–æ–ª–∏–Ω–∞', '–ù–∞–¥–≤—ñ—Ä–Ω–∞', '–ë–æ–ª–µ—Ö—ñ–≤']
  },
  { 
    name: '–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–¢–µ—Ä–Ω–æ–ø—ñ–ª—å', '–ß–æ—Ä—Ç–∫—ñ–≤', '–ö—Ä–µ–º–µ–Ω–µ—Ü—å', '–ó–±–∞—Ä–∞–∂', '–ë—É—á–∞—á', '–ë–æ—Ä—â—ñ–≤']
  },
  { 
    name: '–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å', 
    cities: ['–ñ–∏—Ç–æ–º–∏—Ä', '–ë–µ—Ä–¥–∏—á—ñ–≤', '–ö–æ—Ä–æ—Å—Ç–µ–Ω—å', '–ù–æ–≤–æ–≥—Ä–∞–¥-–í–æ–ª–∏–Ω—Å—å–∫–∏–π', '–ú–∞–ª–∏–Ω', '–†–∞–¥–æ–º–∏—à–ª—å']
  }
]

# –°—á–µ—Ç—á–∏–∫–∏
regions_created = 0
regions_updated = 0
cities_created = 0
cities_updated = 0

puts "üìç –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –≥–æ—Ä–æ–¥–æ–≤..."

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Ä–µ–≥–∏–æ–Ω
regions_data.each do |region_data|
  # –ù–∞—Ö–æ–¥–∏–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Ä–µ–≥–∏–æ–Ω
  region = Region.find_or_initialize_by(name: region_data[:name])
  
  if region.persisted?
    puts "  ‚úÖ –†–µ–≥–∏–æ–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: #{region.name} (ID: #{region.id})"
    regions_updated += 1
  else
    if region.save
      puts "  ‚ú® –°–æ–∑–¥–∞–Ω —Ä–µ–≥–∏–æ–Ω: #{region.name} (ID: #{region.id})"
      regions_created += 1
    else
      puts "  ‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞ #{region_data[:name]}: #{region.errors.full_messages.join(', ')}"
      next
    end
  end
  
  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≥–æ—Ä–æ–¥–∞ —Ä–µ–≥–∏–æ–Ω–∞
  region_data[:cities].each do |city_name|
    city = City.find_or_initialize_by(name: city_name, region: region)
    
    if city.persisted?
      puts "    ‚úÖ –ì–æ—Ä–æ–¥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: #{city.name}"
      cities_updated += 1
    else
      if city.save
        puts "    ‚ú® –°–æ–∑–¥–∞–Ω –≥–æ—Ä–æ–¥: #{city.name} (ID: #{city.id})"
        cities_created += 1
      else
        puts "    ‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ #{city_name}: #{city.errors.full_messages.join(', ')}"
      end
    end
  end
end

puts "\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç:"
puts "  –†–µ–≥–∏–æ–Ω—ã - —Å–æ–∑–¥–∞–Ω–æ: #{regions_created}, –æ–±–Ω–æ–≤–ª–µ–Ω–æ: #{regions_updated}"
puts "  –ì–æ—Ä–æ–¥–∞ - —Å–æ–∑–¥–∞–Ω–æ: #{cities_created}, –æ–±–Ω–æ–≤–ª–µ–Ω–æ: #{cities_updated}"
puts "  –í—Å–µ–≥–æ —Ä–µ–≥–∏–æ–Ω–æ–≤: #{Region.count}"
puts "  –í—Å–µ–≥–æ –≥–æ—Ä–æ–¥–æ–≤: #{City.count}"

# –í—ã–≤–æ–¥–∏–º ID –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
puts "\nüìã ID –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏:"
major_cities = ['–ö–∏—ó–≤', '–õ—å–≤—ñ–≤', '–û–¥–µ—Å–∞', '–•–∞—Ä–∫—ñ–≤', '–î–Ω—ñ–ø—Ä–æ', '–ó–∞–ø–æ—Ä—ñ–∂–∂—è', '–í—ñ–Ω–Ω–∏—Ü—è', '–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫']
major_cities.each do |city_name|
  city = City.find_by(name: city_name)
  if city
    puts "  #{city.name}: ID #{city.id} (—Ä–µ–≥–∏–æ–Ω: #{city.region.name})"
  end
end

puts "‚úÖ –†–µ–≥–∏–æ–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã!" 