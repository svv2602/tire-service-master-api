# üìã –û–¢–ß–ï–¢: –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø BACKEND –ß–ê–°–¢–ò - –¢–ò–ü–´ –ü–û–°–¢–û–í –ò –ö–ê–¢–ï–ì–û–†–ò–ò –£–°–õ–£–ì

## üéØ –¶–ï–õ–¨ –ü–†–û–ï–ö–¢–ê
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å backend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π —Å–≤—è–∑—å—é –ø–æ—Å—Ç–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, JSON –ø–æ–ª–µ–º –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, API –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –ª–æ–≥–∏–∫–æ–π —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### üóÑÔ∏è –≠–¢–ê–ü 1: –ú–ò–ì–†–ê–¶–ò–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•

#### ‚úÖ –ü–æ—ç—Ç–∞–ø–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (5/5)
1. **20250626121600_add_service_category_to_service_posts.rb** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ service_category_id –∫–∞–∫ nullable —Å –∏–Ω–¥–µ–∫—Å–æ–º
2. **20250626121629_assign_default_categories_to_posts.rb** - —Å–æ–∑–¥–∞–Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–û–±—â–∏–µ —É—Å–ª—É–≥–∏" –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –≤—Å–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ—Å—Ç–∞–º
3. **20250626121701_make_service_category_required_in_posts.rb** - –ø–æ–ª–µ service_category_id —Å–¥–µ–ª–∞–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º (NOT NULL)
4. **20250626121725_add_service_category_to_bookings.rb** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ service_category_id –≤ —Ç–∞–±–ª–∏—Ü—É bookings
5. **20250626121747_add_category_contacts_to_service_points.rb** - –¥–æ–±–∞–≤–ª–µ–Ω–æ JSON –ø–æ–ª–µ category_contacts —Å GIN –∏–Ω–¥–µ–∫—Å–æ–º

#### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ 27 –ø–æ—Å—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- Foreign key constraints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å rollback

### üèóÔ∏è –≠–¢–ê–ü 2: –û–ë–ù–û–í–õ–ï–ù–ò–ï –ú–û–î–ï–õ–ï–ô

#### ‚úÖ ServicePost (3/3)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å–≤—è–∑—å `belongs_to :service_category`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `validates :service_category_id, presence: true`
- –ù–æ–≤—ã–µ —Å–∫–æ—É–ø—ã: `by_category`, `with_category`
- –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `category_name`, `supports_category?`

#### ‚úÖ ServicePoint (8/8)
- –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –ø–æ—Å—Ç–æ–≤:
  - `posts_for_category(category_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `posts_count_for_category(category_id)` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `supports_category?(category_id)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `available_categories` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - `category_statistics` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏:
  - `contact_phone_for_category(category_id)` - —Ç–µ–ª–µ—Ñ–æ–Ω –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `contact_email_for_category(category_id)` - email –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `set_category_contact(category_id, phone:, email:)` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
  - `remove_category_contact(category_id)` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞

#### ‚úÖ Booking (3/3)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å `belongs_to :service_category, optional: true`
- –ù–æ–≤—ã–µ —Å–∫–æ—É–ø—ã: `by_category`, `with_category`
- –í–∞–ª–∏–¥–∞—Ü–∏—è `service_category_matches_service_point` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–æ–π

### üåê –≠–¢–ê–ü 3: API –ö–û–ù–¢–†–û–õ–õ–ï–†–´

#### ‚úÖ ServicePointsController (3/3)
- **GET /api/v1/service_points/by_category** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ—á–µ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–æ—Ä–æ–¥–∞
- **GET /api/v1/service_points/:id/posts_by_category** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **PATCH /api/v1/service_points/:id/category_contacts** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

#### ‚úÖ AvailabilityController (2/2)
- **POST /api/v1/availability/check_with_category** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **GET /api/v1/availability/slots_for_category** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### üîß –≠–¢–ê–ü 4: –°–ï–†–í–ò–°–´

#### ‚úÖ DynamicAvailabilityService (2/2)
- **check_availability_with_category()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥
- **available_slots_for_category()** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ—Å—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### üõ†Ô∏è –≠–¢–ê–ü 5: –°–ï–†–ò–ê–õ–ò–ó–ê–¢–û–†–´

#### ‚úÖ ServicePostSerializer
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å `belongs_to :service_category`
- –î–æ–±–∞–≤–ª–µ–Ω –∞—Ç—Ä–∏–±—É—Ç `category_name`

### üõ£Ô∏è –≠–¢–ê–ü 6: –†–û–£–¢–´

#### ‚úÖ –ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ config/routes.rb
```ruby
# –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
resources :service_points do
  collection do
    get 'by_category'
  end
  member do
    get 'posts_by_category'
    patch 'category_contacts'
  end
end

# API –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
post 'availability/check_with_category'
get 'availability/slots_for_category'
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
ServicePost.where(service_category_id: nil).count # => 0
ServicePost.count # => 27
ServicePost.joins(:service_category).count # => 27

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –º–æ–¥–µ–ª–µ–π
sp = ServicePoint.first
sp.available_categories.map(&:name) # => ["–û–±—â–∏–µ —É—Å–ª—É–≥–∏"]
sp.posts_for_category(4).count # => 3 (ID=4 –¥–ª—è "–û–±—â–∏–µ —É—Å–ª—É–≥–∏")
```

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### ‚úÖ –≠–¢–ê–ü 1 - –ú–∏–≥—Ä–∞—Ü–∏–∏: 7/7 (100%)
- 5 –º–∏–≥—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞–Ω—ã –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- 2 –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

### ‚úÖ –≠–¢–ê–ü 2 - –ú–æ–¥–µ–ª–∏: 14/14 (100%)
- ServicePost: 5 –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ServicePoint: 8 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- Booking: 3 –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –≠–¢–ê–ü 3 - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã: 5/5 (100%)
- ServicePointsController: 3 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞
- AvailabilityController: 2 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞

### ‚úÖ –≠–¢–ê–ü 4 - –°–µ—Ä–≤–∏—Å—ã: 2/2 (100%)
- DynamicAvailabilityService: 2 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞

### üîÑ –≠–¢–ê–ü 5 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 0/15 (0%)
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ unit –∏ integration —Ç–µ—Å—Ç–æ–≤

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø–æ—ç—Ç–∞–ø–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
3. **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - JSON –ø–æ–ª–µ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï

### JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ category_contacts:
```json
{
  "1": { "phone": "+380671234567", "email": "tire@example.com" },
  "2": { "phone": "+380671234568", "email": "wash@example.com" }
}
```

### API Response format:
```json
{
  "available": true,
  "available_posts_count": 2,
  "total_posts_count": 3,
  "category_id": 1,
  "reason": null
}
```

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- –ú–æ–¥–µ–ª–∏ –∏ —Å–≤—è–∑–∏
- API endpoints
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å rollback

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:
- Unit —Ç–µ—Å—Ç—ã (RSpec)
- Integration —Ç–µ—Å—Ç—ã
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –∞–ª–µ—Ä—Ç–æ–≤

---

**–î–∞—Ç–∞:** 26 –¥–µ–∫–∞–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** Backend Developer  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê 