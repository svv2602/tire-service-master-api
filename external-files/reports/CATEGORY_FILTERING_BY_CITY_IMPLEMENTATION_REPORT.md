# üéØ –ó–ê–í–ï–†–®–ï–ù–û: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥ –ø–æ –≥–æ—Ä–æ–¥—É

## üìã –ó–ê–î–ê–ß–ê
–ù–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–µ, –∞ –Ω–µ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï

### BACKEND –ò–ó–ú–ï–ù–ï–ù–ò–Ø (tire-service-master-api)

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω ServiceCategoriesController
```ruby
# GET /api/v1/service_categories/by_city_id/:city_id
def by_city_id
  # –õ–æ–≥–∏–∫–∞: —á–µ—Ä–µ–∑ service_posts, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ service_category_id
  @service_categories = ServiceCategory
    .joins("INNER JOIN service_posts ON service_posts.service_category_id = service_categories.id")
    .joins("INNER JOIN service_points ON service_points.id = service_posts.service_point_id")
    .where("service_points.city_id = ? AND service_points.is_active = true", city.id)
    .where("service_posts.is_active = true")
    .where(is_active: true)
    .distinct
end
```

#### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—É–±–ª–∏—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```ruby
skip_before_action :authenticate_request, only: [:index, :show, :by_city, :by_city_id]
```

#### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- service_points_count - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫ –≤ –≥–æ—Ä–æ–¥–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- services_count - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å–ª—É–≥ –≤ –≥–æ—Ä–æ–¥–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- city_name - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞

### FRONTEND –ò–ó–ú–ï–ù–ï–ù–ò–Ø (tire-service-master-web)

#### 1. CategorySelectionStep.tsx - –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
```typescript
// –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≥–æ—Ä–æ–¥—É
const { data: categoriesResponse, isLoading, error } = useGetServiceCategoriesByCityIdQuery(
  formData.city_id!,
  { skip: !formData.city_id }
);
```

#### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–π UX
- –ü–æ–∫–∞–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫ –∏ —É—Å–ª—É–≥ —á–µ—Ä–µ–∑ Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –≥–æ—Ä–æ–¥–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –≥–æ—Ä–æ–¥–∞
- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ development —Ä–µ–∂–∏–º–µ

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### API –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ö–∏—ó–≤ (ID=1) - –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl "http://localhost:8000/api/v1/service_categories/by_city_id/1"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂, –¢–û, –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏)

# –ë—Ä–æ–≤–∞—Ä–∏ (ID=2) - –Ω–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π  
curl "http://localhost:8000/api/v1/service_categories/by_city_id/2"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–Ω–µ—Ç —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫)
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–û –ò–ó–ú–ï–ù–ï–ù–ò–ô:
- –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≥–æ—Ä–æ–¥–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –≤—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—É—é –≤ –µ–≥–æ –≥–æ—Ä–æ–¥–µ
- –ù–∞ –≤—Ç–æ—Ä–æ–º —à–∞–≥–µ –Ω–µ –±—ã–ª–æ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### –ü–û–°–õ–ï –ò–ó–ú–ï–ù–ï–ù–ò–ô:
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–µ
- –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–æ—á–µ–∫ –∏ —É—Å–ª—É–≥
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- –£–ª—É—á—à–µ–Ω–Ω—ã–π UX —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

## üìÅ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

### Backend:
- app/controllers/api/v1/service_categories_controller.rb - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å
- config/routes.rb - –¥–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç by_city_id

### Frontend:
- src/pages/bookings/components/CategorySelectionStep.tsx - –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- src/api/serviceCategories.api.ts - –¥–æ–±–∞–≤–ª–µ–Ω useGetServiceCategoriesByCityIdQuery

## üîÑ –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –≥–æ—Ä–æ–¥ ‚Üí API –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –≥–æ—Ä–æ–¥–∞
2. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ—á–µ–∫ –∏ —É—Å–ª—É–≥  
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏
4. –ù–∞ –≤—Ç–æ—Ä–æ–º —à–∞–≥–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è!
