# üê≥ –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CORS –ø—Ä–æ–±–ª–µ–º –≤ Docker Compose

## üö® –ü–†–û–ë–õ–ï–ú–ê
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker Compose –≤–æ–∑–Ω–∏–∫–∞–ª–∏ CORS –æ—à–∏–±–∫–∏:
```
Access to fetch at 'http://localhost:8000/api/v1/health' from origin 'http://192.168.3.145:3008' 
has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.
```

## üîç –ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: IP –∞–¥—Ä–µ—Å `192.168.3.145:3008` –Ω–µ –±—ã–ª –≤–∫–ª—é—á–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Docker network origins**: –ù–µ –±—ã–ª–∏ —É—á—Ç–µ–Ω—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ Docker —Å–µ—Ä–≤–∏—Å—ã
3. **–ù–µ–ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ALLOWED_ORIGINS**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –≤–∫–ª—é—á–∞–ª–∞ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ origins

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. Backend: –û–±–Ω–æ–≤–ª–µ–Ω—ã CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
**–§–∞–π–ª**: `tire-service-master-api/config/initializers/cors.rb`
```ruby
# –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ origins
origins 'localhost:3000', '127.0.0.1:3000',
        'localhost:5173', '127.0.0.1:5173',
        'localhost:8080', '127.0.0.1:8080',
        'localhost:3008', '127.0.0.1:3008',
        'localhost:8000', '127.0.0.1:8000',
        '192.168.9.109:3008',
        '192.168.3.145:3008',        # ‚Üê –ù–û–í–´–ô IP –∞–¥—Ä–µ—Å
        # Docker internal network
        /http:\/\/web:\d+/,          # ‚Üê –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è Docker —Å–µ—Ä–≤–∏—Å–æ–≤
        /http:\/\/api:\d+/
```

### 2. Docker Compose: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ALLOWED_ORIGINS
**–§–∞–π–ª**: `docker-compose.yml`
```yaml
environment:
  # CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  ALLOWED_ORIGINS: "http://localhost:3008,http://127.0.0.1:3008,http://192.168.3.145:3008,http://web:3008"
```

### 3. Frontend: –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API URL
**–§–∞–π–ª**: `tire-service-master-web/src/config.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getApiUrl()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è API URL
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (–ª–æ–∫–∞–ª—å–Ω–æ–µ, Docker, —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ development —Ä–µ–∂–∏–º–µ

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `docker-compose up --build`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CORS –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://192.168.3.145:8000`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://192.168.3.145:3008`

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ CORS –æ—à–∏–±–∫–∏ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
1. –ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±–Ω–æ–≤–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ CORS
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ docker-compose.yml)

---
**–î–∞—Ç–∞**: 2025-01-26  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏ 