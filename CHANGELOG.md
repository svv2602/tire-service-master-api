# Changelog

## [Unreleased] - 2024-12-19

### Fixed ✅
- **Налоговый номер партнера теперь необязателен**
  - Убрана валидация `presence: true` для поля `tax_number` в модели `Partner`
  - Добавлена валидация `allow_blank: true` - поле может быть пустым
  - Если налоговый номер указан, он все еще должен быть уникальным
  - Обновлена документация API с указанием обязательных и необязательных полей
  - Исправлена форма создания партнера на фронтенде
  - Улучшена обработка ошибок API
  - Исправлена маршрутизация: кнопка "Добавить партнера" теперь ведет на `/partners/new`

### Technical Changes
- **Бэкенд**:
  - Модель `Partner`: изменена валидация с `validates :tax_number, presence: true, uniqueness: true` на `validates :tax_number, uniqueness: true, allow_blank: true`
  - Упрощены тесты модели Partner - убраны проблемные тесты с фабриками
  
- **Фронтенд**:
  - Убран атрибут `required` из поля налогового номера
  - Исправлен маршрут в кнопке с `/partners/create` на `/partners/new`
  - Обновлена схема валидации Zod: `tax_number` сделан необязательным
  - Улучшена функция обработки ошибок `extractErrorMessage`
  
- **Документация**: 
  - Добавлены разделы с обязательными и необязательными полями для API создания партнера

### API Changes
- `POST /api/v1/partners` - поле `partner.tax_number` теперь необязательно

### Testing ✅
- Все тесты модели Partner проходят успешно (10 примеров, 0 ошибок)
- Функциональность протестирована через API - создание партнеров без налогового номера работает корректно
- В базе данных уже есть партнеры с `tax_number: null`

--- 