# üîß –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è API (tire-service-master-api)

> **–ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:** –°–º. `/home/snisar/mobi_tz/.cursor/rules/PROJECT_RULES.md`

## üéØ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Rails API

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Ruby 3.3.8 + Rails 8.0.2**
- **PostgreSQL 17+**
- **RSpec + FactoryBot** –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **Pundit** –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
- **JWT** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
- **Service Objects** - –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **Form Objects** - –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º
- **Query Objects** - –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Decorators** - –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Policies** - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞:
```ruby
# –°–µ—Ä–≤–∏—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç
class CreateUserService
  def initialize(params)
    @params = params
  end

  def call
    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  end

  private
  
  attr_reader :params
end
```

### –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è:
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã: `Api::V1::ResourceNameController`
- –°–µ—Ä–≤–∏—Å—ã: `ServiceNameService`
- –ü–æ–ª–∏—Ç–∏–∫–∏: `ResourceNamePolicy`
- –ú–æ–¥–µ–ª–∏: `CamelCase` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **100% –ø–æ–∫—Ä—ã—Ç–∏–µ** –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **90%+ –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**
- TDD –ø–æ–¥—Ö–æ–¥: Red ‚Üí Green ‚Üí Refactor
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏ –∏ —Å—Ç–∞–±—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

### Git workflow –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ:
```bash
# –í–°–ï–ì–î–ê —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏
cd tire-service-master-api

# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥
bundle exec rails server
bundle exec rspec
git add .
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è API"
```

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
### –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
1. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
   - –ò–∑—É—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ
   - –í—ã—è–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –û–±—Å—É–¥–∏—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ—Ö–æ–∂–∏–µ —Ä–µ—à–µ–Ω–∏—è

2. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –°–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—â–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### Test-Driven Development (TDD)
1. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
   - –°–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å failing test (Red)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ (Green)
   - –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤ (Refactor)

2. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
   - –õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
   - –ë–æ–ª–µ–µ —á–∏—Å—Ç—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã
   - –ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
   - –ù–∞—á–∏–Ω–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–ª—É—á–∞–∏
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –∏–∑–æ–ª—è—Ü–∏–µ–π —Ç–µ—Å—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- Service Objects –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- Form Objects –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º
- Decorators –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (Draper)
- Query Objects –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
app/
‚îú‚îÄ‚îÄ controllers/      # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API (—Ç–æ–Ω–∫–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
‚îú‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ services/        # –°–µ—Ä–≤–∏—Å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ policies/        # –ü–æ–ª–∏—Ç–∏–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ serializers/     # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è JSON –æ—Ç–≤–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ workers/         # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ decorators/      # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ forms/           # Form Objects –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ queries/         # Query Objects –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ validators/      # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
```

## –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã: `Api::V1::ResourceNameController`
- –ú–æ–¥–µ–ª–∏: `CamelCase` –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ
- –°–µ—Ä–≤–∏—Å—ã: `ServiceNameService`
- –ü–æ–ª–∏—Ç–∏–∫–∏: `ResourceNamePolicy`
- –í–æ—Ä–∫–µ—Ä—ã: `TaskNameWorker`
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã: `ResourceNameDecorator`
- Form Objects: `ResourceNameForm`
- Query Objects: `ResourceNameQuery`

## –°—Ç–∏–ª—å –∫–æ–¥–∞
- –°–ª–µ–¥–æ–≤–∞—Ç—å Ruby Style Guide
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RuboCop –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª—è
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 100 —Å–∏–º–≤–æ–ª–æ–≤
- –û—Ç—Å—Ç—É–ø: 2 –ø—Ä–æ–±–µ–ª–∞
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Test-First –ø–æ–¥—Ö–æ–¥ (—Å–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç—ã, –ø–æ—Ç–æ–º –∫–æ–¥)
- 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ú–∏–Ω–∏–º—É–º 90% –æ–±—â–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RSpec, FactoryBot, Faker
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏ –∏ —Å—Ç–∞–±—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –±–∞–≥–∏ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã

## API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Swagger/OpenAPI
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –û–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –æ—Ç–≤–µ—Ç—ã
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ URL: `/api/v1/`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ–Ω—è—Ç—å Pundit –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Strong Parameters
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- XSS –∏ CSRF –∑–∞—â–∏—Ç–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (includes, preload, joins)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pghero –∏ index_advisor –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ë–î

## Git Flow
- –í–µ—Ç–∫–∞ `main` - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- Feature –≤–µ—Ç–∫–∏: `feature/<–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∏—á–∏>`
- Hotfix –≤–µ—Ç–∫–∏: `hotfix/<–Ω–∞–∑–≤–∞–Ω–∏–µ>`
- Release –≤–µ—Ç–∫–∏: `release/<–≤–µ—Ä—Å–∏—è>`
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã —Å —á–µ—Ç–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ code review

## –î–µ–ø–ª–æ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker
- CI/CD —á–µ—Ä–µ–∑ GitHub Actions
- Staging —Å—Ä–µ–¥–∞ –ø–µ—Ä–µ–¥ production
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
- Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- NewRelic –¥–ª—è APM
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ELK Stack
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Rails logger –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–º–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ bundle-audit
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ Gemfile
- Faraday –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –≤ I18n
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞: Moscow (UTC+3)

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### Service Object
```ruby
# –ü—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
class CreateUserService
  def initialize(params)
    @params = params
  end

  def call
    # –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  end

  private

  attr_reader :params
end
```

### Form Object
```ruby
# –ü—Ä–∏–º–µ—Ä Form Object
class UserRegistrationForm
  include ActiveModel::Model

  attr_accessor :email, :password, :password_confirmation
  
  validates :email, presence: true, format: { with: URI::MailTo::EMAIL_REGEXP }
  validates :password, presence: true, length: { minimum: 8 }
  validates :password_confirmation, presence: true
  validate :passwords_match

  private

  def passwords_match
    return if password == password_confirmation
    errors.add(:password_confirmation, '–Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–∞—Ä–æ–ª–µ–º')
  end
end
```

### Query Object
```ruby
# –ü—Ä–∏–º–µ—Ä Query Object
class ActiveUsersQuery
  def initialize(relation = User.all)
    @relation = relation
  end

  def call
    relation
      .where(active: true)
      .where('last_login_at > ?', 30.days.ago)
      .includes(:profile)
  end

  private

  attr_reader :relation
end
```

### Decorator
```ruby
# –ü—Ä–∏–º–µ—Ä –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
class UserDecorator < Draper::Decorator
  delegate_all

  def full_name
    "#{object.first_name} #{object.last_name}"
  end

  def last_login
    object.last_login_at.strftime('%d.%m.%Y %H:%M')
  end
end
``` 