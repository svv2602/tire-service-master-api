# üì° API Endpoints –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

> **–í–µ—Ä—Å–∏—è:** 1.0.0  
> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2024-12-19  
> **–ë–∞–∑–æ–≤—ã–π URL:** `http://localhost:8000/api/v1`

## üïê –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤

**Endpoint:** `GET /api/v1/availability/:service_point_id/:date`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `service_point_id` (path) - ID —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏
- `date` (path) - –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
GET /api/v1/availability/1/2025-06-10
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "service_point_id": 1,
  "service_point_name": "–®–∏–Ω–æ–°–µ—Ä–≤—ñ—Å –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –•—Ä–µ—â–∞—Ç–∏–∫—É",
  "date": "2025-06-10",
  "is_working_day": true,
  "available_slots": [
    {
      "time": "09:30",
      "available_posts": 4,
      "total_posts": 4,
      "status": "available"
    },
    {
      "time": "09:45",
      "available_posts": 4,
      "total_posts": 4,
      "status": "available"
    }
  ],
  "total_slots": 34
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ (–ø–Ω-—Å–± 9:00-18:00)
- –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–ª–æ—Ç–æ–≤: 15 –º–∏–Ω—É—Ç
- –î–ª—è –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–Ω–µ–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `is_working_day: false` –∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Å–ª–æ—Ç–æ–≤

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**Endpoint:** `POST /api/v1/bookings/check_availability`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "service_point_id": 1,
  "date": "2025-06-10",
  "time": "10:00",
  "duration_minutes": 60
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–¥–æ—Å—Ç—É–ø–Ω–æ):**
```json
{
  "service_point_id": 1,
  "service_point_name": "–®–∏–Ω–æ–°–µ—Ä–≤—ñ—Å –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –•—Ä–µ—â–∞—Ç–∏–∫—É",
  "date": "2025-06-10",
  "time": "10:00",
  "available": true,
  "total_posts": 4,
  "occupied_posts": 0
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ):**
```json
{
  "service_point_id": 1,
  "service_point_name": "–®–∏–Ω–æ–°–µ—Ä–≤—ñ—Å –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –•—Ä–µ—â–∞—Ç–∏–∫—É",
  "date": "2025-06-10",
  "time": "10:00",
  "available": false,
  "reason": "–í—Å–µ –ø–æ—Å—Ç—ã –∑–∞–Ω—è—Ç—ã –≤ 10:00"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Ä–µ–º—è –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

---

## üè¢ –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏

### 3. –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**Endpoint:** `GET /api/v1/service_points?city=:city_name`

**–°—Ç–∞—Ç—É—Å:** üìù –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–∑–µ 1.2

---

### 4. –î–µ—Ç–∞–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**Endpoint:** `GET /api/v1/service_points/:id/details`

**–°—Ç–∞—Ç—É—Å:** üìù –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–∑–µ 1.2

---

## üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**Endpoint:** `POST /api/v1/clients/:client_id/bookings`

**–°—Ç–∞—Ç—É—Å:** üìù –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–∑–µ 1.3

---

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### RSpec —Ç–µ—Å—Ç—ã
–í—Å–µ endpoints –ø–æ–∫—Ä—ã—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è availability –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
bundle exec rspec spec/requests/api/v1/availability_spec.rb

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
bundle exec rspec spec/requests/api/v1/availability_spec.rb:628
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤: 28
- –ü–æ–∫—Ä—ã—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: 100%
- –¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç: –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫, —Ä–∞–±–æ—á–∏–µ/–Ω–µ—Ä–∞–±–æ—á–∏–µ –¥–Ω–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

## üìö Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

API endpoints –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ Swagger:

**URL:** `http://localhost:8000/api-docs/index.html`

**–¢–µ–≥:** `Availability` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤

**–§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- `swagger/v1/swagger.yaml` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `public/api-docs/v1/swagger.yaml` - –ü—É–±–ª–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è

## üöÄ –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- –°–æ–∑–¥–∞–Ω–∏–µ API endpoints
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DynamicAvailabilityService
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (28 —Ç–µ—Å—Ç–æ–≤)
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—á–∏—Ö/–Ω–µ—Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

üìã **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–∫–æ–º–∞–Ω–¥–æ–π**

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã curl –∫–æ–º–∞–Ω–¥

```bash
# –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ –∑–∞–≤—Ç—Ä–∞
curl -X GET "http://localhost:8000/api/v1/availability/1/2025-06-10" | jq

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏
curl -X POST "http://localhost:8000/api/v1/bookings/check_availability" \
  -H "Content-Type: application/json" \
  -d '{"service_point_id": 1, "date": "2025-06-10", "time": "10:00", "duration_minutes": 60}' | jq

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å
curl -X GET "http://localhost:8000/api/v1/availability/1/2025-06-08" | jq
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–í —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏:
- **ID 1:** –®–∏–Ω–æ–°–µ—Ä–≤—ñ—Å –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –•—Ä–µ—â–∞—Ç–∏–∫—É (4 –ø–æ—Å—Ç–∞)
- **ID 2:** –®–∏–Ω–æ–°–µ—Ä–≤—ñ—Å –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –û–±–æ–ª–æ–Ω—ñ (3 –ø–æ—Å—Ç–∞)
- **ID 3:** –ê–≤—Ç–æ–®–∏–Ω–∞ –ü–ª—é—Å —Ü–µ–Ω—Ç—Ä (5 –ø–æ—Å—Ç–æ–≤)
- **ID 4:** –ê–≤—Ç–æ–®–∏–Ω–∞ –ü–ª—é—Å –Ω–∞ –°–∏—Ö–æ–≤—ñ (2 –ø–æ—Å—Ç–∞)
- **ID 5:** –®–∏–Ω–ú–∞–π—Å—Ç–µ—Ä –û–¥–µ—Å–∞ (4 –ø–æ—Å—Ç–∞)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–§–∞–∑–∞ 1.2:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫ –ø–æ –≥–æ—Ä–æ–¥—É
2. **–§–∞–∑–∞ 1.3:** –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏
3. **–§–∞–∑–∞ 1.4:** Frontend API –∫–ª–∏–µ–Ω—Ç—ã —Å RTK Query
4. **–§–∞–∑–∞ 1.5:** TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞. 